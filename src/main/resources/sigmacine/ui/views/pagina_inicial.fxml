<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane xmlns="http://javafx.com/javafx/17.0.12"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="sigmacine.ui.controller.ClienteController"
            prefHeight="600.0" prefWidth="1000.0"
            style="-fx-background-color:#000000;"
            stylesheets="@sigma.css">

    <!-- ===== TOP BAR ===== -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="12" BorderPane.alignment="CENTER" styleClass="topbar">
            <children>
                <Label text="SIGMA CINE" styleClass="brand"/>

                <Button fx:id="btnCartelera"  text="Cartelera"  styleClass="toplink"/>
                <Button fx:id="btnConfiteria" text="Confitería" styleClass="toplink"/>
                <Button fx:id="btnSigmaCard"  text="Sigma Card" styleClass="toplink"/>

                <Region HBox.hgrow="ALWAYS"/>

                <TextField fx:id="txtBuscar" promptText="Buscar" prefWidth="200" styleClass="search"/>
                <Button fx:id="btnBuscar" text="Buscar" onAction="#onBuscarTop"/>

                <Button fx:id="btnCart" text="Cart" styleClass="toplink"/>

                <!-- Controles de sesión -->
                <Button fx:id="btnIniciarSesion" text="Iniciar sesión" styleClass="toplink"/>
                <Label fx:id="lblUserName" text="" styleClass="toplink" visible="false"/>
                <Button fx:id="btnRegistrarse" text="Registrarse" styleClass="toplink"/>

                <!-- Menú de perfil -->
                <MenuButton fx:id="menuPerfil" text="" styleClass="icon-btn">
                    <items>
                        <MenuItem text="Mi Cuenta"/>
                        <MenuItem text="Buscar Tiquetes"/>
                        <MenuItem text="Confitería"/>
                        <MenuItem text="Promociones"/>
                        <MenuItem text="Información Personal"/>
                        <MenuItem text="SigmaCard"/>
                        <MenuItem fx:id="miHistorial" text="Historial de compras"/>
                        <MenuItem text="Notificaciones"/>
                        <MenuItem text="Cartelera"/>
                        <SeparatorMenuItem/>
                        <MenuItem fx:id="miCerrarSesion" text="Cerrar Sesión"/>
                    </items>
                </MenuButton>
            </children>
            <padding><Insets top="10" right="16" bottom="10" left="16"/></padding>
        </HBox>
    </top>

    <!-- ===== CENTRO EN VBOX (promo + content + cards) ===== -->
    <center>
        <VBox spacing="0">

            <!-- Promo (franja + imagen + título + botón) -->
            <StackPane fx:id="promoPane"
                       prefHeight="110.0" minHeight="110.0" maxHeight="110.0"
                       style="-fx-background-color:#993726;">
                <children>
                    <ImageView fx:id="imgPublicidad"
                               fitHeight="110.0"
                               preserveRatio="true"
                               pickOnBounds="true"
                               StackPane.alignment="CENTER">
                        <image>
                            <Image url="/Images/publicidad.png"/>
                        </image>
                    </ImageView>

                    <Label fx:id="lblPromo"
                           text="Promoción"
                           style="-fx-text-fill:#ffffff; -fx-font-weight:bold;"
                           StackPane.alignment="TOP_LEFT"
                           translateX="33" translateY="10">
                        <font><Font name="System Bold" size="13.0"/></font>
                    </Label>

                    <Button fx:id="btnPromoVerMas"
                            text="Ver más"
                            prefWidth="75.0" prefHeight="30.0"
                            style="-fx-background-color:#993726; -fx-background-radius:14; -fx-text-fill:#ffffff; -fx-font-weight:bold;"
                            StackPane.alignment="BOTTOM_LEFT"
                            translateX="32" translateY="-8">
                        <font><Font size="10.0"/></font>
                    </Button>
                </children>
            </StackPane>

            <!-- Contenedor dinámico para vistas (colapsa cuando está vacío) -->
            <StackPane fx:id="content" VBox.vgrow="ALWAYS" pickOnBounds="false"/>

            <!-- Cards del footer -->
            <HBox fx:id="bottomCardsLayer"
                  alignment="CENTER"
                  prefHeight="191.0" prefWidth="606.0"
                  style="-fx-background-color: transparent;">
                <children>
                    <GridPane fx:id="footerGrid" alignment="CENTER" prefHeight="172.0" prefWidth="602.0">
                        <columnConstraints>
                            <ColumnConstraints hgrow="SOMETIMES" prefWidth="167.8"/>
                            <ColumnConstraints hgrow="SOMETIMES" prefWidth="167.8"/>
                            <ColumnConstraints hgrow="SOMETIMES" prefWidth="167.8"/>
                            <ColumnConstraints hgrow="SOMETIMES" prefWidth="167.8"/>
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints vgrow="SOMETIMES" prefHeight="114.0"/>
                            <RowConstraints vgrow="SOMETIMES" prefHeight="41.8"/>
                            <RowConstraints vgrow="SOMETIMES" prefHeight="62.6"/>
                        </rowConstraints>
                        <children>
                            <!-- Fila 0: pósters -->
                            <ImageView fx:id="imgCard1" fitHeight="115.0" fitWidth="149.0" pickOnBounds="true" preserveRatio="true"/>
                            <ImageView fx:id="imgCard2" fitHeight="115.0" fitWidth="149.0" pickOnBounds="true" preserveRatio="true" GridPane.columnIndex="1"/>
                            <ImageView fx:id="imgCard3" fitHeight="115.0" fitWidth="149.0" pickOnBounds="true" preserveRatio="true" GridPane.columnIndex="2"/>
                            <ImageView fx:id="imgCard4" fitHeight="115.0" fitWidth="149.0" pickOnBounds="true" preserveRatio="true" GridPane.columnIndex="3"/>

                            <!-- Fila 1: títulos -->
                            <Label fx:id="lblCard1" style="-fx-text-fill:#ffffff; -fx-font-weight:bold;"
                                   GridPane.halignment="CENTER" GridPane.rowIndex="1"/>
                            <Label fx:id="lblCard2" style="-fx-text-fill:#ffffff; -fx-font-weight:bold;"
                                   GridPane.columnIndex="1" GridPane.halignment="CENTER" GridPane.rowIndex="1"/>
                            <Label fx:id="lblCard3" style="-fx-text-fill:#ffffff; -fx-font-weight:bold;"
                                   GridPane.columnIndex="2" GridPane.halignment="CENTER" GridPane.rowIndex="1"/>
                            <Label fx:id="lblCard4" style="-fx-text-fill:#ffffff; -fx-font-weight:bold;"
                                   GridPane.columnIndex="3" GridPane.halignment="CENTER" GridPane.rowIndex="1"/>

                            <!-- Fila 2: botones Ver más -->
                            <Button fx:id="btnCard1" onAction="#onCard1"
                                    prefHeight="30.0" prefWidth="69.0"
                                    style="-fx-background-color:#993726; -fx-background-radius:14; -fx-font-weight:bold; -fx-text-fill:#ffffff;"
                                    text="Ver más" GridPane.halignment="CENTER" GridPane.rowIndex="2">
                                <font><Font size="10.0"/></font>
                            </Button>
                            <Button fx:id="btnCard2" onAction="#onCard2"
                                    prefHeight="30.0" prefWidth="69.0"
                                    style="-fx-background-color:#993726; -fx-background-radius:14; -fx-font-weight:bold; -fx-text-fill:#ffffff;"
                                    text="Ver más" GridPane.columnIndex="1" GridPane.halignment="CENTER" GridPane.rowIndex="2">
                                <font><Font size="10.0"/></font>
                            </Button>
                            <Button fx:id="btnCard3" onAction="#onCard3"
                                    prefHeight="30.0" prefWidth="69.0"
                                    style="-fx-background-color:#993726; -fx-background-radius:14; -fx-font-weight:bold; -fx-text-fill:#ffffff;"
                                    text="Ver más" GridPane.columnIndex="2" GridPane.halignment="CENTER" GridPane.rowIndex="2">
                                <font><Font size="10.0"/></font>
                            </Button>
                            <Button fx:id="btnCard4" onAction="#onCard4"
                                    prefHeight="30.0" prefWidth="69.0"
                                    style="-fx-background-color:#993726; -fx-background-radius:14; -fx-font-weight:bold; -fx-text-fill:#ffffff;"
                                    text="Ver más" GridPane.columnIndex="3" GridPane.halignment="CENTER" GridPane.rowIndex="2">
                                <font><Font size="10.0"/></font>
                            </Button>
                        </children>
                        <padding><Insets top="0" right="0" bottom="0" left="0"/></padding>
                    </GridPane>
                </children>
                <padding><Insets top="0" right="0" bottom="8" left="0"/></padding>
            </HBox>
        </VBox>
    </center>

</BorderPane>

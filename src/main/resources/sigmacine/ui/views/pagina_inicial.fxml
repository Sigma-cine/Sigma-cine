<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>

<BorderPane prefHeight="600.0" prefWidth="1000.0"
            style="-fx-background-color: #000000;"
            xmlns="http://javafx.com/javafx/17.0.12"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="sigmacine.ui.controller.ClienteController"
            stylesheets="@sigma.css">

    <!-- ===== TOP BAR ===== -->
    <top>
        <HBox alignment="CENTER_LEFT" spacing="12" BorderPane.alignment="CENTER" styleClass="topbar">
            <children>

                <!-- Marca / Logo -->
                <Label text="SIGMA CINE" styleClass="brand"/>

                <!-- Navegación -->
                <Button fx:id="btnCartelera"  text="Cartelera"  styleClass="toplink"/>
                <Button fx:id="btnConfiteria" text="Confitería" styleClass="toplink"/>
                <Button fx:id="btnSigmaCard"  text="Sigma Card" styleClass="toplink"/>

                <!-- Separador flexible -->
                <Region HBox.hgrow="ALWAYS"/>

                <!-- Buscador -->
                <TextField fx:id="txtBuscar" promptText="Buscar" prefWidth="220" styleClass="search"/>
                <Button fx:id="btnBuscar" text="Buscar" onAction="#onBuscarTop"/>

                <!-- Carrito (sin onAction, lo manejas desde el controller) -->
                <Button fx:id="btnCart" text="Cart" styleClass="toplink"/>

                <!-- Perfil / Menú -->
                <MenuButton text="" styleClass="icon-btn">
                    <items>
                        <MenuItem text="Mi Cuenta"/>
                        <MenuItem text="Buscar Tiquetes"/>
                        <MenuItem text="Confitería"/>
                        <MenuItem text="Promociones"/>
                        <MenuItem text="Información Personal"/>
                        <MenuItem text="SigmaCard"/>
                        <MenuItem fx:id="miHistorial" text="Historial de compras"/>
                        <MenuItem text="Notificaciones"/>
                        <MenuItem text="Cartelera"/>
                        <SeparatorMenuItem/>
                        <MenuItem fx:id="miCerrarSesion" text="Cerrar Sesión"/>
                    </items>
                </MenuButton>

            </children>
            <padding>
                <Insets top="10" right="16" bottom="10" left="16"/>
            </padding>
        </HBox>
    </top>

    <!-- ===== CONTENIDO ===== -->
    <center>
        <!-- Usamos un StackPane para superponer la franja de promo y el contenedor dinámico -->
        <StackPane>

            <!-- Franja superior de promoción -->
            <StackPane fx:id="promoPane"
                       prefHeight="110.0" minHeight="110.0" maxHeight="110.0"
                       style="-fx-background-color: #993726;"
                       StackPane.alignment="TOP_CENTER"/>

            <!-- Contenedor dinámico donde se cargan sub-vistas -->
            <StackPane fx:id="content" BorderPane.alignment="CENTER"/>

            <!-- Imagen de publicidad dentro de la franja promo -->
            <ImageView fx:id="imgPublicidad"
                       fitHeight="110.0"
                       preserveRatio="true"
                       pickOnBounds="true"
                       StackPane.alignment="TOP_CENTER">
                <image>
                    <Image url="/Images/publicidad.png"/>
                </image>
            </ImageView>

            <!-- Título de la promoción -->
            <Label text="Promoción"
                   style="-fx-text-fill: #ffffff; -fx-font-weight: bold;"
                   StackPane.alignment="TOP_LEFT"
                   translateX="33" translateY="10">
                <font>
                    <Font name="System Bold" size="13.0"/>
                </font>
            </Label>

            <!-- Botón "Ver más" de la promo -->
            <Button fx:id="btnPromoVerMas"
                    text="Ver más"
                    prefWidth="75.0" prefHeight="30.0"
                    style="-fx-background-color: #993726; -fx-background-radius: 14; -fx-text-fill: #ffffff; -fx-font-weight: bold;"
                    StackPane.alignment="TOP_LEFT"
                    translateX="32" translateY="60">
                <font>
                    <Font size="10.0"/>
                </font>
            </Button>

        </StackPane>
    </center>

    <!-- ===== PIE / GRID de tarjetas rápidas ===== -->
    <bottom>
        <HBox prefHeight="191.0" BorderPane.alignment="CENTER">
            <children>
                <GridPane alignment="CENTER" prefHeight="172.0" prefWidth="602.0">
                    <columnConstraints>
                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="167.8"/>
                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="103.2"/>
                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="140.0"/>
                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="144.8"/>
                        <ColumnConstraints hgrow="SOMETIMES" prefWidth="26.6"/>
                    </columnConstraints>
                    <rowConstraints>
                        <RowConstraints vgrow="SOMETIMES" prefHeight="114.0"/>
                        <RowConstraints vgrow="SOMETIMES" prefHeight="41.8"/>
                        <RowConstraints vgrow="SOMETIMES" prefHeight="62.6"/>
                    </rowConstraints>
                    <children>
                        <ImageView fitHeight="115.0" fitWidth="149.0" pickOnBounds="true" preserveRatio="true"/>
                        <ImageView fitHeight="115.0" fitWidth="149.0" pickOnBounds="true" preserveRatio="true" GridPane.columnIndex="1"/>
                        <ImageView fitHeight="106.0" fitWidth="149.0" pickOnBounds="true" preserveRatio="true" GridPane.columnIndex="2"/>
                        <ImageView fitHeight="98.0"  fitWidth="144.0" pickOnBounds="true" preserveRatio="true" GridPane.columnIndex="3"/>

                        <Label style="-fx-text-fill: #ffffff; -fx-font-weight: bold;" text="Label" GridPane.halignment="CENTER" GridPane.rowIndex="1"/>
                        <Label style="-fx-text-fill: #ffffff; -fx-font-weight: bold;" text="Label" GridPane.columnIndex="1" GridPane.halignment="CENTER" GridPane.rowIndex="1"/>
                        <Label style="-fx-text-fill: #FFFFFF; -fx-font-weight: bold;" text="Label" GridPane.columnIndex="2" GridPane.halignment="CENTER" GridPane.rowIndex="1"/>
                        <Label style="-fx-text-fill: #ffffff; -fx-font-weight: bold;" text="Label" GridPane.columnIndex="3" GridPane.halignment="CENTER" GridPane.rowIndex="1"/>

                        <Button fx:id="btnCard1" onAction="#onCard1"
                                contentDisplay="CENTER" mnemonicParsing="false"
                                prefHeight="30.0" prefWidth="69.0"
                                style="-fx-background-color: #993726; -fx-background-radius: 14; -fx-font-weight: bold; -fx-text-fill: #ffffff;"
                                text="Ver más" GridPane.halignment="CENTER" GridPane.rowIndex="2">
                            <font><Font size="10.0"/></font>
                        </Button>
                        <Button fx:id="btnCard2" onAction="#onCard2"
                                contentDisplay="CENTER" mnemonicParsing="false"
                                prefHeight="30.0" prefWidth="69.0"
                                style="-fx-background-color: #993726; -fx-background-radius: 14; -fx-font-weight: bold; -fx-text-fill: #ffffff;"
                                text="Ver más" GridPane.columnIndex="1" GridPane.halignment="CENTER" GridPane.rowIndex="2">
                            <font><Font size="10.0"/></font>
                        </Button>
                        <Button fx:id="btnCard3" onAction="#onCard3"
                                contentDisplay="CENTER" mnemonicParsing="false"
                                prefHeight="30.0" prefWidth="69.0"
                                style="-fx-background-color: #993726; -fx-background-radius: 14; -fx-font-weight: bold; -fx-text-fill: #ffffff;"
                                text="Ver más" GridPane.columnIndex="2" GridPane.halignment="CENTER" GridPane.rowIndex="2">
                            <font><Font size="10.0"/></font>
                        </Button>
                        <Button fx:id="btnCard4" onAction="#onCard4"
                                contentDisplay="CENTER" mnemonicParsing="false"
                                prefHeight="30.0" prefWidth="69.0"
                                style="-fx-background-color: #993726; -fx-background-radius: 14; -fx-font-weight: bold; -fx-text-fill: #ffffff;"
                                text="Ver más" GridPane.columnIndex="3" GridPane.halignment="CENTER" GridPane.rowIndex="2">
                            <font><Font size="10.0"/></font>
                        </Button>
                    </children>
                </GridPane>
            </children>
        </HBox>
    </bottom>

</BorderPane>
